https://zhuanlan.zhihu.com/p/144934079

前端页面卡顿的原因有很多，从渲染机制和运行上可以分为两大类，分别是：
渲染不及时，页面掉帧
网页内存占用过高，运行卡顿

渲染不及时，页面掉帧:

1. . 长时间占用 js 线程
2. . 页面回流和重绘较多
3. . 资源加载阻塞

内存过大导致的页面卡顿: 内存泄漏导致内存过大

- 意外的全局变量引起的内存泄漏
- 闭包引起的内存泄漏
- 被遗忘的定时器
- 循环引用
- DOM 删除时没有解绑事件
- 没有清理的 DOM 元素引用 dom 节点或事件占用内存过大

## 一、渲染

1. 长时间占用 js 线程
   浏览器包括 js 线程和 GUI 线程，而二者是互斥的，当长时间占用 js 线程时，会导致渲染不及时，出现页面卡顿。
   采用同步方式获取数据，会导致 gui 线程挂起，数据返回后再执行渲染。
   计算时间过长导致页面渲染不及时

渲染不及时的原因：
浏览器的渲染频率一般是 60HZ，即要求 1 帧的时间为 1s / 60 = 16.67ms，浏览器显示页面的时候，要处理 js 逻辑，还要做渲染，每个执行片段不能超过 16.67ms。实际上，浏览器内核自身支撑体系运行也需要消耗一些时间，所以留给我们的时间差不多只有 10ms。
采用 requestIdleCallback 和 requestAnimationFrame，任务分片

2. 页面回流和重绘较多
   获取 scrollTop、clentWidth 等维度属性时都会触发 layout 以获取实时的值，所以在 for 循环里面应该把这些值缓存一下
3. 资源加载阻塞
   js 资源放在 body 之前
   行内 script 阻塞
   css 加载会阻塞 DOM 树渲染（css 并不会阻塞 DOM 树的解析）
   资源过大阻塞

## 内存过大导致的页面卡顿

1. 内存泄漏导致内存过大 ==》 垃圾回收机制

### 常见的造成内存泄漏的原因：

意外的全局变量引起的内存泄漏
闭包引起的内存泄漏
被遗忘的定时器
循环引用
DOM 删除时没有解绑事件 没有清理的 DOM 元素引用

2，dom 节点或事件占用内存过大
